syntax = "proto3";

option java_multiple_files = true;
option java_package = "osins.matrix.auth.grpc";
option java_outer_classname = "RolePathRpc";

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";
import "commons.proto";

// =====================================
// 角色路径服务（动态权限路径）
// =====================================
service SysRolePathService {
  rpc FindAll(google.protobuf.Empty) returns (SysRolePathList);
  rpc FindByRole(FindByRoleRequest) returns (SysRolePathList);
  rpc FindByPath(FindByPathRequest) returns (SysRolePathList);
  rpc CreateRolePath(CreateRolePathRequest) returns (SysRolePathResponse);
  rpc UpdateRolePath(UpdateRolePathRequest) returns (SysRolePathResponse);
  rpc DeleteById(DeleteByIdRequest) returns (DeleteResponse);
}

message SysRolePath {
  int64 id = 1;
  string roleName = 2;
  string pathPattern = 3;
  string httpMethod = 4;

  // 新增时间字段
  google.protobuf.Timestamp createdAt = 7;
  google.protobuf.Timestamp updatedAt = 8;
}

message SysRolePathList { repeated SysRolePath rolePaths = 1; }
message SysRolePathResponse { SysRolePath rolePath = 1; }
message FindByRoleRequest { string roleName = 1; }
message FindByPathRequest { string pathPattern = 1; }
message CreateRolePathRequest { int64 id = 1; string roleName = 2; string pathPattern = 3; string httpMethod = 4; }
message UpdateRolePathRequest { SysRolePath rolePath = 1; }
message DeleteByIdRequest { int64 id = 1; }



